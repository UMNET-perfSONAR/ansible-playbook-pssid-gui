- hosts: all
  vars:
    pssid_gui_path: /usr/local/pssid-gui
    pssid_gui_inventories_path: /var/lib/pssid-gui/inventories
    pssid_gui_default_inventory_path: /usr/lib/pssid-gui/default-inventory
    pssid_gui_port: '8080'
    pssid_gui_branch: main

  roles:
  # get pssid-gui itself
  - ansible-role-pssid-gui
  # get Ansible so the inventories generated by pssid-gui can be used
  - geerlingguy.ansible

  tasks:
  # get the Ansible playbook that uses the inventories generated by pssid-gui
  - name: install ansible-playbook-pssid-daemon alongside the pSSID-GUI
    git:
      repo: https://github.com/UMNET-perfSONAR/ansible-playbook-pssid-daemon
      dest: '{{ pssid_gui_path | dirname }}/ansible-playbook-pssid-daemon'
      force: true

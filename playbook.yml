- hosts: all
  vars:
    pssid_gui_path: /usr/local/pssid-gui
    pssid_gui_inventories_path: /usr/local/pssid-gui/inventories-other
    pssid_gui_default_inventory_path: /usr/lib/pssid-gui/default-inventory-other
    pssid_gui_port: '8080'
    pssid_gui_branch: main

  roles:
  # get pssid-gui itself (installs Docker as its dependency)
  - name: ansible-role-pssid-gui
  # get Ansible so that the inventories generated by pssid-gui can be used
  - geerlingguy.ansible

  tasks:
  # get the Ansible playbook that uses the inventories generated by pssid-gui
  - name: install the ansible-playbook-pssid-daemon
    git:
      repo: https://github.com/UMNET-perfSONAR/ansible-playbook-pssid-daemon
      dest: '{{ pssid_gui_path | dirname }}/ansible-playbook-pssid-daemon'
      force: true
